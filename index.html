<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <style>
        *{
            padding: 0;
            margin: o;
            box-sizing: border-box;
      
        }
        #text1{
            position: relative;
            text-align: center;
            color: blue;
            margin-top: 20px;
            
           
        }
      
        #mid{
            height:60vh;
            width: 100vw;
            /* border: 1px solid black; */
            display: flex;
            /* flex-direction: column; */
            justify-content: space-evenly;
            align-items: center;
        }
        #innermid{
            height: 80%;
            width: 40%;
            border: 0px solid black;
            
           
            /* opacity: 0.3; */
            /* background-color: rgb(87, 87, 111); */
            color: #1c1c94;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
background: #c6d6fd;
box-shadow:  20px 20px 60px #b6c0d9,
             -20px -20px 60px #f6ffff;
            
        }
        #innermid2{
            height: 80%;
            width: 40%;
            display: grid;
            border: 0 px solid black;
            border-radius: 10px;
            grid-template-columns: repeat(2,1fr);
            justify-items: center;
            align-items: center;
            
background: #d6e2ff;
box-shadow:  20px 20px 60px #b6c0d9,
             -20px -20px 60px #f6ffff;
        }
        [class^="innerbox"]{
            height: 40%;
            width: 40%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 0px solid black;
            
            color: blue;
            border-radius: 10px;
background: #d6e2ff;
box-shadow:  20px 20px 60px #b6c0d9,
             -20px -20px 60px #f6ffff;

          
        }
        [class^="innerbox"]{
            cursor: pointer;
            color: blue;
        }
        
        #temp{
            border: 0px solid rgb(183, 20, 20);
            height: 90%;
            width: 95%;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            padding: 0px;
            margin: 0px;
            border-radius: 10px;
background: #d6e2ff;
box-shadow:  20px 20px 60px #b6c0d9,
             -20px -20px 60px #f6ffff;
        }
        #tempc{
            font-size: 5rem;
            margin: 0px;
        }
        #percent{
            margin: 0px;
            font-size: 2rem;
        }
        #btn{
            border: 0px solid white;
            border-radius: 2px;
            color: blue;
            width: 100px;
            height: 40px;
            border-radius: 5px;
background: #d6e2ff;
box-shadow:  5px 5px 10px #676c7a,
             -5px -5px 10px #ffffff;
        }
        .footer{
               opacity: 0.3;
                
                height: 10vh;
                width: 100vw;
                display: flex;
                justify-content: center;
                align-items: center;
                
                margin: 10vh 0vh 0vh 0vh;
            }
        @media (max-width: 820px) {
            #mid{
                height: 150vh;
                flex-direction: column;
            }
            #innermid{
                height:50vh;
                width:80%;
            }
            #innermid2{
                height: 80vh;
                width:80%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            [class^="innerbox"]{
                height: 100px;
                margin-top: 15px;
            }
            #tempc{
                font-size:3rem ;
            }
            #text2{
                font-size: 19px;
            }
           

        }
        @media(min-width:820px) and (max-width:1030px){
          .innerbox1{
            font-size: 14px;
          }
          .innerbox2{
            font-size: 14px;
          }
          .innerbox3{
            font-size: 14px;
          }
          .innerbox4{
            font-size: 14px;
          }
        }
    </style>
    
</head>
<body style="background: #d6e2ff;">
    <nav class="navbar navbar-expand-lg bg-primary ">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">HOME</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">ABOUT</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  MORE
                </a>
                <!-- <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul> -->
              </li>
              <li class="nav-item">
                <a class="nav-link disabled"></a>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2 " type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
      </nav>
    <h1 id="text1" data-text="Hi  Welcome to IOT DashBoard">Hi  Welcome to IOT DashBoard</h1>
    <div id="mid">
        <div id="innermid">
            <div id="temp">
                <h1 id="tempc">tempC</h1>
                <h1 id="percent">90%</h1>
                <button id="btn">Show Graph</button>
            </div>
        </div>
        <div id="innermid2">
            <div class="innerbox1" id="buttn1">SWITCH-1</div>
            <div class="innerbox2" id="buttn2">SWITCH-2</div>
            <div class="innerbox3" id="buttn3">SWITCH-3</div>
            <div class="innerbox4" id="buttn4">SWITCH-4</div>
        </div>
        
    </div>
    <div class="footer">
        <h1 id="text2">Represented By kgec Robtics Socity</h1>
    </div>
    <!-- <div><h1 style="text-align: center;">Represented By kgec Robotic Socity</h1></div> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.0/socket.io.js" integrity="sha512-nYuHvSAhY5lFZ4ixSViOwsEKFvlxHMU2NHts1ILuJgOS6ptUmAGt/0i5czIgMOahKZ6JN84YFDA+mCdky7dD8A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script>
        // user = prompt("Please Enter Your Name :- ", "Admin Boss");
        // let i = 0;
        // let str = "";
        // while(user[i] != ' '){
        //     str = str + user[i];
        //     i = i+1;
        // }
        // document.getElementById('user').innerHTML = str;

        let button1 = document.getElementById('buttn1');
        let button2 = document.getElementById('buttn2');
        let button3 = document.getElementById('buttn3');
        let button4 = document.getElementById('buttn4');
        let p = 0;

        button1.addEventListener('click', ()=>{
            console.log("button-1 Clicked");
            p++;
            if(p%2 == 1){
                document.getElementById('buttn1').style.backgroundColor = 'white';
                document.getElementById('buttn1').style.color = 'blue';
                postData('/button', { button_one_value: true })
                .then((data) => {
                 console.log(data); 
            
                });
            }
            else{
                document.getElementById('buttn1').style.backgroundColor = 'cornflowerblue';
                document.getElementById('buttn1').style.color = 'white'; 
                postData('/button', { button_one_value: false })
                .then((data) => {
                console.log(data); 
            
                });
            }
            

        })
        let q = 0;
        button2.addEventListener('click', ()=>{
            console.log("button-2 Clicked");
            q++;
            if(q%2 == 1){
                document.getElementById('buttn2').style.backgroundColor = 'white';
                document.getElementById('buttn2').style.color = 'blue';
                postData('/button', { button_two_value: true })
                .then((data) => {
                console.log(data); 
            
                });
            }
            else{
                document.getElementById('buttn2').style.backgroundColor = 'cornflowerblue';
                document.getElementById('buttn2').style.color = 'white'; 
                postData('/button', { button_two_value: false })
                .then((data) => {
                console.log(data); 
            
                });
            }
        })
        let r = 0;
        button3.addEventListener('click', ()=>{
            console.log("button-3 Clicked");
            r++;
            if(r%2 == 1){
                document.getElementById('buttn3').style.backgroundColor = 'white';
                document.getElementById('buttn3').style.color = 'blue';
                postData('/button', { button_three_value: true })
                .then((data) => {
                console.log(data); 
            
                });
            }
            else{
                document.getElementById('buttn3').style.backgroundColor = 'cornflowerblue';
                document.getElementById('buttn3').style.color = 'white'; 
                postData('/button', { button_three_value: false })
                .then((data) => {
                console.log(data); 
            
                });
            }
        })
        let s = 0;
        button4.addEventListener('click', ()=>{
            console.log("button-4 Clicked");
            s++;
            if(s%2 == 1){
                document.getElementById('buttn4').style.backgroundColor = 'white';
                document.getElementById('buttn4').style.color = 'blue';
                postData('/button', { button_four_value: true })
                .then((data) => {
                console.log(data); 
            
                });
            }
            else{
                document.getElementById('buttn4').style.backgroundColor = 'cornflowerblue';
                document.getElementById('buttn4').style.color = 'white'; 
                postData('/button', { button_four_value: false })
                .then((data) => {
                console.log(data); 
            
                });
            }
        })

    async function postData(url = '', data = {}) {
  
    const response = await fetch(url, {
        method: 'POST', 
        mode: 'cors', 
        cache: 'no-cache',
        credentials: 'same-origin', 
        headers: {
        'Content-Type': 'application/json'
        },
        redirect: 'follow', 
        referrerPolicy: 'no-referrer', 
        body: JSON.stringify(data) 
    });
    return response.json(); 
    }
  
  const URL = window.location.URL;


  const socket = io(URL);

  socket.on("connection", (data) => {
     console.log(socket.id); // x8WIv7-mJelg7on_ALbx
     console.log(data);

    });

  socket.on("weather", (msg)=> {
    
    
    console.log(msg+'-: this is messege');
    document.getElementById('tempc').innerHTML = msg + 'C';
    
  });
  socket.on("hum", (msg)=> {
    
    
    console.log(msg+'-: this is messege');
    document.getElementById('percent').innerHTML = msg + '%';
    
  });


  setTimeout(() => {
    let data = "hello i am from client";
    socket.emit("hello_server",data);
  }, 2000);

  graph = document.getElementById('graph');

  

  

</script>
</body>
</html>